"use strict";const input=document.querySelector(".js-input"),btnSearch=document.querySelector(".js-btn"),result=document.querySelector(".js-result"),favList=document.querySelector(".js-result-fav"),deleteItemsBtn=document.querySelector(".container__section--btn-delete"),containerFav=document.querySelector(".js-container"),deleteFavBtn=document.querySelector(".btn-single-delete");let listSeries=[],favouritesList=[];function getInfo(){let e=input.value;fetch("https://api.tvmaze.com/search/shows?q="+e).then(e=>e.json()).then(e=>{listSeries=e,paintSeries(),listenList(),paintFavList(),deleteAllFav()})}function paintSeries(){let e="";for(let t=0;t<listSeries.length;t++){listSeries[t].show.id;const s=listSeries[t].show.name,i=listSeries[t].show.image;e+=`<li  class="js-list-item js-list-color " id="${t}">`,e+=`<h2 class="js-title-film"> ${s} </h2>`,e+=null===i?'<img class="js-list-image" src = "https://fabulousfurs.com/ItemImages/Large/IMAGE_NOT_AVAILABLE_535x764_4.jpg"  alt = "cover selected serie" ':`<img class="js-list-image" src = ${i.medium} \n        alt = "cover selected serie" >`,e+="</li>"}result.innerHTML=e}function favouritesSeries(e){const t=parseInt(e.currentTarget.id);let s=listSeries[t];const i=s.show.id,n=favouritesList.map((function(e){return e.show.id})).indexOf(i);-1===n?(favouritesList.push(s),containerFav.classList.remove("js-hidden")):favouritesList.splice(n,1),paintSeries(),listenList(),paintFavList(),setLocalStorage()}function deleteAllFav(){favouritesList=[],favList.innerHTML="",localStorage.clear()}function listenList(){const e=document.querySelectorAll(".js-list-item");for(const t of e)t.addEventListener("click",favouritesSeries)}function paintFavList(){let e="";for(let t=0;t<favouritesList.length;t++){const s=favouritesList[t].show.name,i=favouritesList[t].show.image;favouritesList[t].show.id;e+=`<li  class="js-result-fav js-list-fav " id="${t}">`,e+=`<h3 class="js-title-film"> ${s} </h3>`,e+=null===i?'<img src = "https://via.placeholder.com/210x295/ffffff/666666/?text=TV." alt = "cover selected serie" width="100">':`<img src = ${i.medium} alt = "cover selected serie" width="100">`,e+="</li>"}favList.innerHTML=e}function getFromLocalStorage(){const e=localStorage.getItem("objeto");null!==e&&(favouritesList=JSON.parse(e))}function setLocalStorage(){const e=JSON.stringify(favouritesList);localStorage.setItem("objeto",e),paintFavList()}btnSearch.addEventListener("click",getInfo),deleteItemsBtn.addEventListener("click",deleteAllFav),input.addEventListener("keydown",(function(e){13===e.keyCode&&(e.preventDefault(),getInfo())})),getFromLocalStorage(),getInfo();